# 多目录支持功能说明

## 功能概述

PRON对比系统现已支持同时处理多个本地目录，可以跨多个磁盘或文件夹进行视频内容相似度检测。

## 配置方法

### 1. 通过配置文件配置

在 `config.yaml` 中配置多个目录：

```yaml
local_roots:
  - "F:/作品"              # 主要作品目录
  - "D:/Videos/PORN"       # PORN平台视频
  - "E:/收藏/欧美作品"      # 欧美作品收藏
  - "G:/备份/JAV收藏"       # JAV作品备份
  - "H:/临时下载"           # 临时下载目录
```

### 2. 通过GUI界面配置

1. 打开程序，进入【运行控制】标签页
2. 在目录配置区域可以看到当前配置的所有目录
3. 点击【添加】按钮可以添加新的目录
4. 点击【删除】按钮可以移除不需要的目录
5. 系统会同时扫描所有配置的目录

## 功能特性

### 目录扫描
- 系统会递归扫描每个配置目录下的所有子文件夹
- 自动识别PORN格式（[Channel] 模特名）和JAVDB格式（模特名）的目录结构
- 支持不同盘符和路径的混合配置

### 视频处理
- 跨目录整合同一模特的视频文件
- 自动去除重复的视频标题
- 统一进行文件名清理和标准化处理

### 性能优化
- 多线程并发处理多个目录
- 智能缓存机制避免重复扫描
- 内存优化，支持大量目录同时处理

## 使用场景

### 场景1：分散存储管理
当您的视频文件分散存储在不同磁盘或文件夹时：
```
F:/作品/          # 主要收藏
D:/Videos/PORN/   # PORN平台下载
E:/欧美作品/       # 欧美作品
G:/JAV备份/        # JAV作品备份
```

### 场景2：分类存储管理
按照不同类型分类存储：
```
F:/PORN/          # PORN平台视频
F:/JAV/           # JAV作品
F:/欧美/           # 欧美作品
F:/临时/           # 临时下载
```

### 场景3：备份和同步
主目录和备份目录同时监控：
```
F:/主收藏/         # 主要收藏目录
G:/备份/主收藏/     # 备份目录
```

## 注意事项

### 最佳实践
1. **避免重复配置**：不要将同一个目录配置多次
2. **合理分类**：按照实际使用习惯分类存储
3. **定期清理**：及时移除已失效或不再使用的目录配置
4. **权限检查**：确保程序对所有配置目录都有读取权限

### 性能考虑
1. **目录数量**：建议不超过20个目录以保证最佳性能
2. **目录深度**：避免配置层级过深的目录结构
3. **文件数量**：单个目录下文件过多时考虑进一步细分

### 故障排除
1. **目录不存在**：系统会跳过不存在的目录并给出警告
2. **权限不足**：确保程序有足够的权限访问所有配置目录
3. **路径格式**：使用正斜杠(/)或双反斜杠(\\)作为路径分隔符

## 日志输出

系统会在日志中显示每个目录的处理情况：
```
PORN - 扫描目录: F:/作品
PORN - 扫描目录: D:/Videos/PORN
JAVDB - 扫描目录: E:/收藏/欧美作品
...
```

这样可以清楚地看到哪些目录被成功扫描，哪些目录存在问题。